<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/Skillhub/EJEMPLOS_USO.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Skillhub/EJEMPLOS_USO.md" />
              <option name="updatedContent" value="# Ejemplos de Uso - Servicios Skillhub&#10;&#10;Este archivo contiene ejemplos prácticos de cómo usar cada servicio implementado.&#10;&#10;---&#10;&#10;##  Ejemplo Completo: Flujo de Trabajo&#10;&#10;```java&#10;// ============================================&#10;// 1. CREAR USUARIOS (Instructor y Estudiante)&#10;// ============================================&#10;&#10;// Crear instructor&#10;User instructor = new User();&#10;instructor.setNombre(&quot;Juan Pérez&quot;);&#10;instructor.setEmail(&quot;juan.perez@example.com&quot;);&#10;instructor = userService.save(instructor);&#10;&#10;// Crear estudiantes&#10;User student1 = new User();&#10;student1.setNombre(&quot;Ana López&quot;);&#10;student1.setEmail(&quot;ana.lopez@example.com&quot;);&#10;student1 = userService.save(student1);&#10;&#10;User student2 = new User();&#10;student2.setNombre(&quot;Carlos Ruiz&quot;);&#10;student2.setEmail(&quot;carlos.ruiz@example.com&quot;);&#10;student2 = userService.save(student2);&#10;&#10;// ============================================&#10;// 2. CREAR CATEGORÍAS&#10;// ============================================&#10;&#10;Category categoryJava = new Category();&#10;categoryJava.setNombre(&quot;Java&quot;);&#10;categoryJava.setDescripcion(&quot;Programación en Java&quot;);&#10;categoryJava = categoryService.save(categoryJava);&#10;&#10;Category categorySpring = new Category();&#10;categorySpring.setNombre(&quot;Spring Framework&quot;);&#10;categorySpring.setDescripcion(&quot;Framework Spring para Java&quot;);&#10;categorySpring = categoryService.save(categorySpring);&#10;&#10;// ============================================&#10;// 3. CREAR CURSO CON LECCIONES (Caso de Uso 1)&#10;// ============================================&#10;&#10;Course course = new Course();&#10;course.setNombre(&quot;Java Spring Boot Completo&quot;);&#10;course.setDuracionHoras(50);&#10;&#10;// Crear lecciones iniciales&#10;List&lt;Lesson&gt; lessons = Arrays.asList(&#10;    new Lesson(null, &quot;Introducción a Spring Boot&quot;, &#10;               &quot;Conceptos básicos de Spring Boot...&quot;, 30, null),&#10;    new Lesson(null, &quot;Configuración del proyecto&quot;, &#10;               &quot;Cómo configurar un proyecto Spring Boot...&quot;, 45, null),&#10;    new Lesson(null, &quot;Spring Data JPA&quot;, &#10;               &quot;Persistencia con Spring Data JPA...&quot;, 60, null),&#10;    new Lesson(null, &quot;REST Controllers&quot;, &#10;               &quot;Creación de APIs REST...&quot;, 90, null)&#10;);&#10;&#10;// Asignar categorías&#10;List&lt;Long&gt; categoryIds = Arrays.asList(categoryJava.getId(), categorySpring.getId());&#10;&#10;// Crear curso con lecciones&#10;Course createdCourse = courseService.createCourseWithLessons(&#10;    course, &#10;    instructor.getId(), &#10;    lessons, &#10;    categoryIds&#10;);&#10;&#10;System.out.println(&quot;✅ Curso creado: &quot; + createdCourse.getNombre());&#10;System.out.println(&quot;   - Instructor: &quot; + createdCourse.getInstructor().getNombre());&#10;System.out.println(&quot;   - Lecciones: &quot; + createdCourse.getLessons().size());&#10;System.out.println(&quot;   - Categorías: &quot; + createdCourse.getCategories().size());&#10;&#10;// ============================================&#10;// 4. MATRICULAR USUARIOS (Caso de Uso 2)&#10;// ============================================&#10;&#10;// Matricular primer estudiante&#10;Enrollment enrollment1 = enrollmentService.enrollUserInCourse(&#10;    student1.getId(), &#10;    createdCourse.getId()&#10;);&#10;System.out.println(&quot;✅ &quot; + student1.getNombre() + &quot; matriculado en &quot; + createdCourse.getNombre());&#10;System.out.println(&quot;   - Estado: &quot; + enrollment1.getStatus());&#10;System.out.println(&quot;   - Progreso: &quot; + enrollment1.getProgressPercent() + &quot;%&quot;);&#10;System.out.println(&quot;   - Fecha: &quot; + enrollment1.getEnrolledAt());&#10;&#10;// Matricular segundo estudiante&#10;Enrollment enrollment2 = enrollmentService.enrollUserInCourse(&#10;    student2.getId(), &#10;    createdCourse.getId()&#10;);&#10;&#10;// Intentar matricular de nuevo (lanzará excepción)&#10;try {&#10;    enrollmentService.enrollUserInCourse(student1.getId(), createdCourse.getId());&#10;} catch (RuntimeException e) {&#10;    System.out.println(&quot;❌ Error esperado: &quot; + e.getMessage());&#10;    // &quot;El usuario ya está matriculado en este curso&quot;&#10;}&#10;&#10;// ============================================&#10;// 5. ACTUALIZAR PROGRESO (Caso de Uso 3)&#10;// ============================================&#10;&#10;// Student1 progresa al 25%&#10;enrollment1 = enrollmentService.updateProgress(enrollment1.getId(), 25);&#10;System.out.println(&quot; Progreso de &quot; + student1.getNombre() + &quot;: &quot; + enrollment1.getProgressPercent() + &quot;%&quot;);&#10;&#10;// Student1 progresa al 75%&#10;enrollment1 = enrollmentService.updateProgress(enrollment1.getId(), 75);&#10;System.out.println(&quot; Progreso de &quot; + student1.getNombre() + &quot;: &quot; + enrollment1.getProgressPercent() + &quot;%&quot;);&#10;&#10;// Student1 completa el curso (100% → estado automático COMPLETED)&#10;enrollment1 = enrollmentService.updateProgress(enrollment1.getId(), 100);&#10;System.out.println(&quot; &quot; + student1.getNombre() + &quot; completó el curso!&quot;);&#10;System.out.println(&quot;   - Estado: &quot; + enrollment1.getStatus()); // COMPLETED&#10;System.out.println(&quot;   - Progreso: &quot; + enrollment1.getProgressPercent() + &quot;%&quot;);&#10;&#10;// ============================================&#10;// 6. LISTAR CURSOS POR CATEGORÍA (Caso de Uso 4)&#10;// ============================================&#10;&#10;List&lt;Course&gt; cursosJava = courseService.findCoursesByCategory(categoryJava.getId());&#10;System.out.println(&quot;\n Cursos en categoría 'Java': &quot; + cursosJava.size());&#10;cursosJava.forEach(c -&gt; System.out.println(&quot;   - &quot; + c.getNombre()));&#10;&#10;List&lt;Course&gt; cursosSpring = courseService.findCoursesByCategory(categorySpring.getId());&#10;System.out.println(&quot; Cursos en categoría 'Spring': &quot; + cursosSpring.size());&#10;cursosSpring.forEach(c -&gt; System.out.println(&quot;   - &quot; + c.getNombre()));&#10;&#10;// ============================================&#10;// 7. PUBLICAR REVIEWS (Caso de Uso 5)&#10;// ============================================&#10;&#10;// Student1 publica una review (ya completó el curso)&#10;Review review1 = reviewService.createReview(&#10;    student1.getId(),&#10;    createdCourse.getId(),&#10;    5,&#10;    &quot;¡Excelente curso! Aprendí muchísimo sobre Spring Boot. El instructor explica muy bien.&quot;&#10;);&#10;System.out.println(&quot;\n⭐ Review de &quot; + student1.getNombre() + &quot;:&quot;);&#10;System.out.println(&quot;   - Rating: &quot; + review1.getRating() + &quot;/5&quot;);&#10;System.out.println(&quot;   - Comentario: &quot; + review1.getComment());&#10;&#10;// Student2 publica su review&#10;Review review2 = reviewService.createReview(&#10;    student2.getId(),&#10;    createdCourse.getId(),&#10;    4,&#10;    &quot;Muy buen curso, aunque me hubiera gustado más ejercicios prácticos.&quot;&#10;);&#10;&#10;// Intentar publicar otra review (lanzará excepción)&#10;try {&#10;    reviewService.createReview(student1.getId(), createdCourse.getId(), 5, &quot;Otra review&quot;);&#10;} catch (RuntimeException e) {&#10;    System.out.println(&quot;❌ Error esperado: &quot; + e.getMessage());&#10;    // &quot;El usuario ya ha publicado una review para este curso&quot;&#10;}&#10;&#10;// ============================================&#10;// 8. CONSULTAR REVIEWS DE UN CURSO&#10;// ============================================&#10;&#10;List&lt;Review&gt; reviews = reviewService.findReviewsByCourse(createdCourse.getId());&#10;System.out.println(&quot;\n Reviews del curso '&quot; + createdCourse.getNombre() + &quot;': &quot; + reviews.size());&#10;&#10;double averageRating = reviews.stream()&#10;    .mapToInt(Review::getRating)&#10;    .average()&#10;    .orElse(0.0);&#10;System.out.println(&quot;⭐ Rating promedio: &quot; + String.format(&quot;%.1f&quot;, averageRating) + &quot;/5&quot;);&#10;&#10;reviews.forEach(review -&gt; {&#10;    System.out.println(&quot;\n    &quot; + review.getUser().getNombre());&#10;    System.out.println(&quot;   ⭐ &quot; + review.getRating() + &quot;/5&quot;);&#10;    System.out.println(&quot;    &quot; + review.getComment());&#10;    System.out.println(&quot;    &quot; + review.getCreatedAt());&#10;});&#10;&#10;// ============================================&#10;// 9. LISTAR MATRÍCULAS DE UN USUARIO&#10;// ============================================&#10;&#10;List&lt;Enrollment&gt; enrollmentsStudent1 = enrollmentService.findEnrollmentsByUser(student1.getId());&#10;System.out.println(&quot;\n Cursos de &quot; + student1.getNombre() + &quot;:&quot;);&#10;enrollmentsStudent1.forEach(e -&gt; {&#10;    System.out.println(&quot;   - &quot; + e.getCourse().getNombre());&#10;    System.out.println(&quot;     Estado: &quot; + e.getStatus() + &quot; | Progreso: &quot; + e.getProgressPercent() + &quot;%&quot;);&#10;});&#10;&#10;// ============================================&#10;// 10. LISTAR ESTUDIANTES DE UN CURSO&#10;// ============================================&#10;&#10;List&lt;Enrollment&gt; enrollmentsCourse = enrollmentService.findEnrollmentsByCourse(createdCourse.getId());&#10;System.out.println(&quot;\n Estudiantes matriculados en '&quot; + createdCourse.getNombre() + &quot;':&quot;);&#10;enrollmentsCourse.forEach(e -&gt; {&#10;    System.out.println(&quot;   - &quot; + e.getUser().getNombre());&#10;    System.out.println(&quot;     Estado: &quot; + e.getStatus() + &quot; | Progreso: &quot; + e.getProgressPercent() + &quot;%&quot;);&#10;});&#10;&#10;// ============================================&#10;// 11. AÑADIR NUEVA LECCIÓN A UN CURSO&#10;// ============================================&#10;&#10;Lesson newLesson = new Lesson();&#10;newLesson.setTitulo(&quot;Spring Security&quot;);&#10;newLesson.setContenido(&quot;Implementación de seguridad en Spring Boot...&quot;);&#10;newLesson.setDuracionMinutos(120);&#10;&#10;Lesson createdLesson = lessonService.createLesson(newLesson, createdCourse.getId());&#10;System.out.println(&quot;\n Nueva lección añadida: &quot; + createdLesson.getTitulo());&#10;&#10;// ============================================&#10;// 12. ACTUALIZAR UNA REVIEW&#10;// ============================================&#10;&#10;Review updatedReview = reviewService.updateReview(&#10;    review1.getId(),&#10;    5,&#10;    &quot;¡Excelente curso! Ahora que terminé todos los proyectos, lo valoro aún más.&quot;&#10;);&#10;System.out.println(&quot;\n✏️ Review actualizada&quot;);&#10;&#10;// ============================================&#10;// 13. CANCELAR UNA MATRÍCULA&#10;// ============================================&#10;&#10;enrollment2 = enrollmentService.cancelEnrollment(enrollment2.getId());&#10;System.out.println(&quot;\n❌ Matrícula de &quot; + student2.getNombre() + &quot; cancelada&quot;);&#10;System.out.println(&quot;   - Estado: &quot; + enrollment2.getStatus()); // CANCELLED&#10;&#10;// ============================================&#10;// 14. AGREGAR CATEGORÍA A UN CURSO EXISTENTE&#10;// ============================================&#10;&#10;Category categoryWeb = new Category();&#10;categoryWeb.setNombre(&quot;Desarrollo Web&quot;);&#10;categoryWeb.setDescripcion(&quot;Desarrollo de aplicaciones web&quot;);&#10;categoryWeb = categoryService.save(categoryWeb);&#10;&#10;Course updatedCourse = courseService.addCategoryToCourse(&#10;    createdCourse.getId(), &#10;    categoryWeb.getId()&#10;);&#10;System.out.println(&quot;\n️ Categoría añadida al curso&quot;);&#10;System.out.println(&quot;   - Curso: &quot; + updatedCourse.getNombre());&#10;System.out.println(&quot;   - Categorías totales: &quot; + updatedCourse.getCategories().size());&#10;&#10;// ============================================&#10;// 15. LISTAR CURSOS DE UN INSTRUCTOR&#10;// ============================================&#10;&#10;List&lt;Course&gt; cursosInstructor = courseService.findCoursesByInstructor(instructor.getId());&#10;System.out.println(&quot;\n Cursos impartidos por &quot; + instructor.getNombre() + &quot;: &quot; + cursosInstructor.size());&#10;cursosInstructor.forEach(c -&gt; {&#10;    System.out.println(&quot;   - &quot; + c.getNombre() + &quot; (&quot; + c.getDuracionHoras() + &quot;h)&quot;);&#10;});&#10;&#10;```&#10;&#10;---&#10;&#10;##  Casos de Prueba y Validaciones&#10;&#10;### Test 1: Validación de Matrícula Duplicada&#10;```java&#10;@Test&#10;public void testDuplicateEnrollment() {&#10;    // Primera matrícula: OK&#10;    Enrollment enrollment = enrollmentService.enrollUserInCourse(userId, courseId);&#10;    assertNotNull(enrollment);&#10;    assertEquals(EnrollmentStatus.ENROLLED, enrollment.getStatus());&#10;    &#10;    // Segunda matrícula: Debe lanzar excepción&#10;    assertThrows(RuntimeException.class, () -&gt; {&#10;        enrollmentService.enrollUserInCourse(userId, courseId);&#10;    });&#10;}&#10;```&#10;&#10;### Test 2: Validación de Review Duplicada&#10;```java&#10;@Test&#10;public void testDuplicateReview() {&#10;    // Primera review: OK&#10;    Review review = reviewService.createReview(userId, courseId, 5, &quot;Excelente&quot;);&#10;    assertNotNull(review);&#10;    &#10;    // Segunda review: Debe lanzar excepción&#10;    assertThrows(RuntimeException.class, () -&gt; {&#10;        reviewService.createReview(userId, courseId, 4, &quot;Otra review&quot;);&#10;    });&#10;}&#10;```&#10;&#10;### Test 3: Validación de Rating&#10;```java&#10;@Test&#10;public void testInvalidRating() {&#10;    // Rating menor a 1: Debe lanzar excepción&#10;    assertThrows(IllegalArgumentException.class, () -&gt; {&#10;        reviewService.createReview(userId, courseId, 0, &quot;Mal&quot;);&#10;    });&#10;    &#10;    // Rating mayor a 5: Debe lanzar excepción&#10;    assertThrows(IllegalArgumentException.class, () -&gt; {&#10;        reviewService.createReview(userId, courseId, 6, &quot;Excelente&quot;);&#10;    });&#10;    &#10;    // Rating válido: OK&#10;    Review review = reviewService.createReview(userId, courseId, 3, &quot;Regular&quot;);&#10;    assertNotNull(review);&#10;}&#10;```&#10;&#10;### Test 4: Auto-completar Curso&#10;```java&#10;@Test&#10;public void testAutoCompleteEnrollment() {&#10;    Enrollment enrollment = enrollmentService.enrollUserInCourse(userId, courseId);&#10;    assertEquals(EnrollmentStatus.ENROLLED, enrollment.getStatus());&#10;    &#10;    // Actualizar a 100%&#10;    enrollment = enrollmentService.updateProgress(enrollment.getId(), 100);&#10;    &#10;    // Debe cambiar automáticamente a COMPLETED&#10;    assertEquals(EnrollmentStatus.COMPLETED, enrollment.getStatus());&#10;    assertEquals(100, enrollment.getProgressPercent());&#10;}&#10;```&#10;&#10;### Test 5: Validación de Progreso&#10;```java&#10;@Test&#10;public void testInvalidProgress() {&#10;    Enrollment enrollment = enrollmentService.enrollUserInCourse(userId, courseId);&#10;    &#10;    // Progreso negativo: Debe lanzar excepción&#10;    assertThrows(IllegalArgumentException.class, () -&gt; {&#10;        enrollmentService.updateProgress(enrollment.getId(), -10);&#10;    });&#10;    &#10;    // Progreso mayor a 100: Debe lanzar excepción&#10;    assertThrows(IllegalArgumentException.class, () -&gt; {&#10;        enrollmentService.updateProgress(enrollment.getId(), 150);&#10;    });&#10;}&#10;```&#10;&#10;---&#10;&#10;##  Consultas Útiles&#10;&#10;### Obtener todos los cursos completados por un usuario&#10;```java&#10;List&lt;Enrollment&gt; completedCourses = enrollmentService.findEnrollmentsByUser(userId)&#10;    .stream()&#10;    .filter(e -&gt; e.getStatus() == EnrollmentStatus.COMPLETED)&#10;    .collect(Collectors.toList());&#10;```&#10;&#10;### Obtener el promedio de rating de un curso&#10;```java&#10;List&lt;Review&gt; reviews = reviewService.findReviewsByCourse(courseId);&#10;double averageRating = reviews.stream()&#10;    .mapToInt(Review::getRating)&#10;    .average()&#10;    .orElse(0.0);&#10;```&#10;&#10;### Contar estudiantes activos en un curso&#10;```java&#10;long activeStudents = enrollmentService.findEnrollmentsByCourse(courseId)&#10;    .stream()&#10;    .filter(e -&gt; e.getStatus() == EnrollmentStatus.ENROLLED)&#10;    .count();&#10;```&#10;&#10;### Obtener cursos en progreso de un usuario&#10;```java&#10;List&lt;Enrollment&gt; inProgressCourses = enrollmentService.findEnrollmentsByUser(userId)&#10;    .stream()&#10;    .filter(e -&gt; e.getStatus() == EnrollmentStatus.ENROLLED &amp;&amp; e.getProgressPercent() &gt; 0)&#10;    .collect(Collectors.toList());&#10;```&#10;&#10;---&#10;&#10;##  Estadísticas del Sistema&#10;&#10;### Dashboard del Instructor&#10;```java&#10;// Obtener cursos del instructor&#10;List&lt;Course&gt; myCourses = courseService.findCoursesByInstructor(instructorId);&#10;&#10;// Para cada curso, obtener estadísticas&#10;myCourses.forEach(course -&gt; {&#10;    List&lt;Enrollment&gt; enrollments = enrollmentService.findEnrollmentsByCourse(course.getId());&#10;    List&lt;Review&gt; reviews = reviewService.findReviewsByCourse(course.getId());&#10;    &#10;    long totalStudents = enrollments.size();&#10;    long activeStudents = enrollments.stream()&#10;        .filter(e -&gt; e.getStatus() == EnrollmentStatus.ENROLLED)&#10;        .count();&#10;    long completedStudents = enrollments.stream()&#10;        .filter(e -&gt; e.getStatus() == EnrollmentStatus.COMPLETED)&#10;        .count();&#10;    &#10;    double averageProgress = enrollments.stream()&#10;        .filter(e -&gt; e.getStatus() == EnrollmentStatus.ENROLLED)&#10;        .mapToInt(Enrollment::getProgressPercent)&#10;        .average()&#10;        .orElse(0.0);&#10;    &#10;    double averageRating = reviews.stream()&#10;        .mapToInt(Review::getRating)&#10;        .average()&#10;        .orElse(0.0);&#10;    &#10;    System.out.println(&quot; &quot; + course.getNombre());&#10;    System.out.println(&quot;   Total estudiantes: &quot; + totalStudents);&#10;    System.out.println(&quot;   Activos: &quot; + activeStudents);&#10;    System.out.println(&quot;   Completados: &quot; + completedStudents);&#10;    System.out.println(&quot;   Progreso promedio: &quot; + String.format(&quot;%.1f%%&quot;, averageProgress));&#10;    System.out.println(&quot;   Rating: &quot; + String.format(&quot;%.1f/5&quot;, averageRating) + &quot; (&quot; + reviews.size() + &quot; reviews)&quot;);&#10;});&#10;```&#10;&#10;### Dashboard del Estudiante&#10;```java&#10;List&lt;Enrollment&gt; myEnrollments = enrollmentService.findEnrollmentsByUser(studentId);&#10;List&lt;Review&gt; myReviews = reviewService.findReviewsByUser(studentId);&#10;&#10;long totalCourses = myEnrollments.size();&#10;long activeCourses = myEnrollments.stream()&#10;    .filter(e -&gt; e.getStatus() == EnrollmentStatus.ENROLLED)&#10;    .count();&#10;long completedCourses = myEnrollments.stream()&#10;    .filter(e -&gt; e.getStatus() == EnrollmentStatus.COMPLETED)&#10;    .count();&#10;&#10;System.out.println(&quot; Mi perfil:&quot;);&#10;System.out.println(&quot;   Total cursos: &quot; + totalCourses);&#10;System.out.println(&quot;   En progreso: &quot; + activeCourses);&#10;System.out.println(&quot;   Completados: &quot; + completedCourses);&#10;System.out.println(&quot;   Reviews publicadas: &quot; + myReviews.size());&#10;```&#10;&#10;---&#10;&#10;** Nota:** Todos estos ejemplos asumen que los servicios están inyectados correctamente mediante Spring (`@Autowired` o constructor injection).&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Skillhub/INDICE.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Skillhub/INDICE.md" />
              <option name="updatedContent" value="#  Índice de Documentación - Skillhub Services&#10;&#10;## ✅ Estado de Implementación: COMPLETO&#10;&#10;---&#10;&#10;##  Documentos Disponibles&#10;&#10;### 1. **RESUMEN.md** - Vista Rápida&#10; Resumen ejecutivo de todo lo implementado&#10;- Tabla de casos de uso&#10;- Lista de servicios&#10;- Estado del proyecto&#10;- Estadísticas de implementación&#10;&#10;**[ Ver RESUMEN.md](./RESUMEN.md)**&#10;&#10;---&#10;&#10;### 2. **SERVICIOS.md** - Documentación Completa&#10; Documentación técnica detallada de todos los servicios&#10;- Descripción de cada caso de uso implementado&#10;- Detalle completo de cada servicio&#10;- Asociaciones JPA y direccionalidad&#10;- Repositorios extendidos&#10;- Características implementadas&#10;- Próximos pasos sugeridos&#10;&#10;**[ Ver SERVICIOS.md](./SERVICIOS.md)**&#10;&#10;---&#10;&#10;### 3. **EJEMPLOS_USO.md** - Guía Práctica&#10; Ejemplos de código y casos de uso reales&#10;- Flujo de trabajo completo (paso a paso)&#10;- Casos de prueba y validaciones&#10;- Consultas útiles&#10;- Estadísticas del sistema&#10;- Dashboard de instructor&#10;- Dashboard de estudiante&#10;&#10;**[ Ver EJEMPLOS_USO.md](./EJEMPLOS_USO.md)**&#10;&#10;---&#10;&#10;##  Guía de Navegación Rápida&#10;&#10;### Si eres nuevo en el proyecto:&#10;1. **Empieza con RESUMEN.md** - Para entender qué se ha implementado&#10;2. **Consulta SERVICIOS.md** - Para conocer los detalles técnicos&#10;3. **Usa EJEMPLOS_USO.md** - Para ver cómo usar cada servicio&#10;&#10;### Si eres desarrollador:&#10;- **SERVICIOS.md** - Referencia técnica completa&#10;- **EJEMPLOS_USO.md** - Snippets de código para copiar/pegar&#10;&#10;### Si eres arquitecto/revisor:&#10;- **RESUMEN.md** - Vista general de arquitectura&#10;- **SERVICIOS.md** - Decisiones de diseño y asociaciones JPA&#10;&#10;---&#10;&#10;##  Estructura del Proyecto&#10;&#10;```&#10;Skillhub/&#10;├── src/main/java/com/salesianostriana/edu/skillhub/&#10;│   ├── model/                    # Entidades JPA (6)&#10;│   │   ├── Category.java&#10;│   │   ├── Course.java&#10;│   │   ├── Enrollment.java       ✨ Completado con atributos extra&#10;│   │   ├── EnrollmentStatus.java&#10;│   │   ├── Lesson.java&#10;│   │   ├── Review.java           ✨ Completado con atributos extra&#10;│   │   └── User.java&#10;│   │&#10;│   ├── repository/               # Repositorios JPA (6)&#10;│   │   ├── CategoryRepository.java&#10;│   │   ├── CourseRepository.java        ✨ Consultas personalizadas&#10;│   │   ├── EnrollmentRepository.java    ✨ Consultas personalizadas&#10;│   │   ├── LessonRepository.java&#10;│   │   ├── ReviewRepository.java        ✨ Consultas personalizadas&#10;│   │   └── UserRepository.java&#10;│   │&#10;│   └── service/                  # Servicios de negocio (6) ✅&#10;│       ├── CategoryService.java  ✅ Implementado&#10;│       ├── CourseService.java    ✅ Implementado&#10;│       ├── EnrollmentService.java ✅ Implementado&#10;│       ├── LessonService.java    ✅ Implementado&#10;│       ├── ReviewService.java    ✅ Implementado&#10;│       └── UserService.java      ✅ Implementado&#10;│&#10;├── RESUMEN.md                    ✅ Vista rápida&#10;├── SERVICIOS.md                  ✅ Documentación completa&#10;├── EJEMPLOS_USO.md               ✅ Guía práctica&#10;└── INDICE.md                     ✅ Este archivo&#10;```&#10;&#10;---&#10;&#10;##  Entidades del Dominio&#10;&#10;### User (Usuario)&#10;Representa tanto alumnos como instructores&#10;- **Atributos:** id, nombre, email&#10;- **Relaciones:** coursesAsInstructor, enrollments, reviews&#10;&#10;### Course (Curso)&#10;Cursos publicados en la plataforma&#10;- **Atributos:** id, nombre, duracionHoras&#10;- **Relaciones:** instructor (User), lessons, categories, enrollments, reviews&#10;&#10;### Lesson (Lección)&#10;Lecciones que componen un curso&#10;- **Atributos:** id, titulo, contenido, duracionMinutos&#10;- **Relaciones:** course&#10;&#10;### Category (Categoría)&#10;Categorización de cursos&#10;- **Atributos:** id, nombre, descripcion&#10;- **Relaciones:** courses (ManyToMany)&#10;&#10;### Enrollment (Matrícula) ⭐ Tabla intermedia con atributos&#10;Matrícula de un usuario en un curso con metadatos&#10;- **Atributos:** id, enrolledAt, status, progressPercent&#10;- **Relaciones:** user, course&#10;- **Estados:** ENROLLED, CANCELLED, COMPLETED&#10;&#10;### Review (Reseña) ⭐ Con restricción de unicidad&#10;Reseña de un usuario sobre un curso&#10;- **Atributos:** id, rating (1-5), comment, createdAt&#10;- **Relaciones:** user, course&#10;- **Restricción:** Un usuario solo puede tener una review por curso&#10;&#10;---&#10;&#10;##  Servicios Implementados&#10;&#10;| Servicio | Responsabilidad | Casos de Uso |&#10;|----------|----------------|--------------|&#10;| **CategoryService** | Gestión de categorías | CRUD completo |&#10;| **CourseService** | Gestión de cursos | ✨ Crear curso con lecciones&lt;br&gt;✨ Listar por categoría&lt;br&gt;CRUD completo |&#10;| **UserService** | Gestión de usuarios | CRUD completo |&#10;| **LessonService** | Gestión de lecciones | Crear y asociar a curso&lt;br&gt;CRUD completo |&#10;| **EnrollmentService** | Gestión de matrículas | ✨ Matricular usuario&lt;br&gt;✨ Actualizar progreso&lt;br&gt;Cancelar matrícula |&#10;| **ReviewService** | Gestión de reseñas | ✨ Publicar review (sin duplicados)&lt;br&gt;Actualizar review |&#10;&#10;---&#10;&#10;## ⭐ Casos de Uso Principales&#10;&#10;### 1️⃣ Crear curso con lecciones iniciales&#10;```java&#10;courseService.createCourseWithLessons(course, instructorId, lessons, categoryIds);&#10;```&#10;&#10;### 2️⃣ Matricular usuario en curso&#10;```java&#10;enrollmentService.enrollUserInCourse(userId, courseId);&#10;```&#10;&#10;### 3️⃣ Actualizar progreso de matrícula&#10;```java&#10;enrollmentService.updateProgress(enrollmentId, progressPercent);&#10;```&#10;&#10;### 4️⃣ Listar cursos de una categoría&#10;```java&#10;courseService.findCoursesByCategory(categoryId);&#10;```&#10;&#10;### 5️⃣ Publicar review evitando duplicados&#10;```java&#10;reviewService.createReview(userId, courseId, rating, comment);&#10;```&#10;&#10;---&#10;&#10;## ️ Tecnologías Utilizadas&#10;&#10;- **Spring Boot** 3.x&#10;- **Spring Data JPA**&#10;- **Hibernate** (implementación JPA)&#10;- **Lombok**&#10;- **Jakarta Persistence API**&#10;&#10;---&#10;&#10;## ✨ Características Destacadas&#10;&#10;✅ **Transacciones** - Anotaciones `@Transactional` en operaciones de escritura  &#10;✅ **Validaciones** - Prevención de duplicados, rangos válidos  &#10;✅ **Auditoría** - Fechas automáticas con `@PrePersist`  &#10;✅ **Lógica de negocio** - Auto-completar curso, estados dinámicos  &#10;✅ **Consultas optimizadas** - JPQL para consultas complejas  &#10;✅ **Restricciones de BD** - Unique constraints en Review  &#10;✅ **Cascadas** - CascadeType en relaciones apropiadas  &#10;&#10;---&#10;&#10;##  Métricas de Implementación&#10;&#10;| Métrica | Valor |&#10;|---------|-------|&#10;| Entidades | 6 |&#10;| Repositorios | 6 |&#10;| Servicios | 6 |&#10;| Casos de Uso Principales | 5 |&#10;| Métodos de Servicio | 50+ |&#10;| Consultas Personalizadas | 10+ |&#10;| Errores de Compilación | 0 |&#10;| Warnings (unused methods) | Normal (sin controladores aún) |&#10;&#10;---&#10;&#10;##  Próximos Pasos Sugeridos&#10;&#10;1. ⏳ **Crear Controladores REST** para exponer servicios&#10;2. ⏳ **Implementar DTOs** para capa de presentación&#10;3. ⏳ **Añadir Bean Validation** (@Valid, @NotNull)&#10;4. ⏳ **Implementar Paginación** en listados&#10;5. ⏳ **Spring Security** para autenticación/autorización&#10;6. ⏳ **Tests Unitarios** con JUnit y Mockito&#10;7. ⏳ **Tests de Integración** con @SpringBootTest&#10;8. ⏳ **Documentación API** con OpenAPI/Swagger&#10;9. ⏳ **Manejo de Excepciones** centralizado&#10;10. ⏳ **Logs estructurados** con SLF4J&#10;&#10;---&#10;&#10;##  Información de Contacto&#10;&#10;Para dudas o consultas sobre la implementación, consulta:&#10;- **SERVICIOS.md** para detalles técnicos&#10;- **EJEMPLOS_USO.md** para snippets de código&#10;- **RESUMEN.md** para vista general&#10;&#10;---&#10;&#10;##  Historial de Cambios&#10;&#10;### 2025-12-16 - Implementación Inicial ✅&#10;- ✅ Completadas entidades Enrollment y Review&#10;- ✅ Extendidos 3 repositorios con consultas personalizadas&#10;- ✅ Implementados 6 servicios completos&#10;- ✅ Desarrollados 5 casos de uso principales&#10;- ✅ Creada documentación completa&#10;- ✅ Añadidos ejemplos de uso&#10;&#10;---&#10;&#10;**Estado:** ✅ FASE DE SERVICIOS COMPLETA  &#10;**Próxima Fase:** Controladores REST y DTOs  &#10;**Última Actualización:** 2025-12-16&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Skillhub/RESUMEN.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Skillhub/RESUMEN.md" />
              <option name="updatedContent" value="# Resumen Rápido - Servicios Implementados&#10;&#10;##  Resumen Ejecutivo&#10;&#10;✅ **6 Servicios completos**  &#10;✅ **5 Casos de uso principales implementados**  &#10;✅ **3 Repositorios extendidos con consultas personalizadas**  &#10;✅ **0 Errores de compilación**  &#10;&#10;---&#10;&#10;##  Casos de Uso Implementados&#10;&#10;| # | Caso de Uso | Servicio | Método Principal |&#10;|---|-------------|----------|------------------|&#10;| 1 | Crear curso con lecciones iniciales | CourseService | `createCourseWithLessons()` |&#10;| 2 | Matricular usuario en curso | EnrollmentService | `enrollUserInCourse()` |&#10;| 3 | Actualizar progreso de matrícula | EnrollmentService | `updateProgress()` |&#10;| 4 | Listar cursos de una categoría | CourseService | `findCoursesByCategory()` |&#10;| 5 | Publicar review evitando duplicados | ReviewService | `createReview()` |&#10;&#10;---&#10;&#10;## ️ Servicios Implementados&#10;&#10;### 1️⃣ CategoryService&#10;```&#10;✓ findAll()&#10;✓ findById()&#10;✓ save()&#10;✓ update()&#10;✓ delete()&#10;```&#10;&#10;### 2️⃣ CourseService ⭐&#10;```&#10;✓ createCourseWithLessons() [Caso de Uso 1]&#10;✓ findCoursesByCategory() [Caso de Uso 4]&#10;✓ findCoursesByInstructor()&#10;✓ addCategoryToCourse()&#10;✓ CRUD completo&#10;```&#10;&#10;### 3️⃣ UserService&#10;```&#10;✓ findAll()&#10;✓ findById()&#10;✓ save()&#10;✓ update()&#10;✓ delete()&#10;```&#10;&#10;### 4️⃣ LessonService&#10;```&#10;✓ createLesson()&#10;✓ findAll()&#10;✓ findById()&#10;✓ update()&#10;✓ delete()&#10;```&#10;&#10;### 5️⃣ EnrollmentService ⭐&#10;```&#10;✓ enrollUserInCourse() [Caso de Uso 2]&#10;✓ updateProgress() [Caso de Uso 3]&#10;✓ cancelEnrollment()&#10;✓ findByUserAndCourse()&#10;✓ findEnrollmentsByUser()&#10;✓ findEnrollmentsByCourse()&#10;```&#10;&#10;### 6️⃣ ReviewService ⭐&#10;```&#10;✓ createReview() [Caso de Uso 5]&#10;✓ updateReview()&#10;✓ findByUserAndCourse()&#10;✓ findReviewsByCourse()&#10;✓ findReviewsByUser()&#10;✓ delete()&#10;```&#10;&#10;---&#10;&#10;##  Modelo de Datos Completado&#10;&#10;### Enrollment (Tabla Intermedia con Atributos)&#10;```java&#10;- enrolledAt: LocalDateTime&#10;- status: EnrollmentStatus (ENROLLED/CANCELLED/COMPLETED)&#10;- progressPercent: Integer (0-100)&#10;```&#10;&#10;### Review&#10;```java&#10;- rating: Integer (1-5)&#10;- comment: String&#10;- createdAt: LocalDateTime&#10;- @UniqueConstraint(user_id, course_id)&#10;```&#10;&#10;---&#10;&#10;##  Asociaciones Implementadas&#10;&#10;```&#10;User (instructor) ←─────── Course ─────────→ Lesson&#10;                            ↕&#10;                         Category&#10;                            ↕&#10;User (student) ←── Enrollment ──→ Course ──→ Review ←── User&#10;```&#10;&#10;### Detalle de Relaciones&#10;&#10;| Relación | Tipo | Dirección | Atributos Extra |&#10;|----------|------|-----------|-----------------|&#10;| Course → User (instructor) | ManyToOne | Bidireccional | - |&#10;| Course → Lesson | OneToMany | Bidireccional | - |&#10;| Course ↔ Category | ManyToMany | Bidireccional | - |&#10;| Enrollment → User/Course | ManyToOne x2 | Bidireccional | ✓ enrolledAt, status, progress |&#10;| Review → User/Course | ManyToOne x2 | Bidireccional | ✓ rating, comment, createdAt |&#10;&#10;---&#10;&#10;## ️ Validaciones y Reglas de Negocio&#10;&#10;### EnrollmentService&#10;- ✅ No permite matrículas duplicadas&#10;- ✅ Progreso automático a COMPLETED al 100%&#10;- ✅ Validación de rango 0-100 para progreso&#10;&#10;### ReviewService&#10;- ✅ Un usuario = una review por curso&#10;- ✅ Rating obligatorio entre 1-5&#10;- ✅ Constraint único en base de datos&#10;&#10;### CourseService&#10;- ✅ Instructor obligatorio&#10;- ✅ Soporte para lecciones y categorías opcionales&#10;&#10;---&#10;&#10;##  Repositorios con Consultas Personalizadas&#10;&#10;### CourseRepository&#10;```java&#10;@Query(&quot;SELECT c FROM Course c JOIN c.categories cat WHERE cat.id = :categoryId&quot;)&#10;List&lt;Course&gt; findByCategoryId(Long categoryId);&#10;```&#10;&#10;### EnrollmentRepository&#10;```java&#10;boolean existsByUserIdAndCourseId(Long userId, Long courseId);&#10;Optional&lt;Enrollment&gt; findByUserIdAndCourseId(Long userId, Long courseId);&#10;```&#10;&#10;### ReviewRepository&#10;```java&#10;boolean existsByUserIdAndCourseId(Long userId, Long courseId);&#10;List&lt;Review&gt; findByCourseId(Long courseId);&#10;```&#10;&#10;---&#10;&#10;##  Características Técnicas&#10;&#10;- ✅ **@Transactional** en todas las operaciones de escritura&#10;- ✅ **@PrePersist** para valores por defecto&#10;- ✅ **@RequiredArgsConstructor** (Lombok) para inyección&#10;- ✅ **Manejo de excepciones** con mensajes descriptivos&#10;- ✅ **JPQL** para consultas complejas&#10;- ✅ **Cascade operations** donde corresponde&#10;&#10;---&#10;&#10;##  Archivos Modificados/Creados&#10;&#10;### Entidades Completadas (2)&#10;- ✅ `Enrollment.java` - Añadidos: enrolledAt, status, progressPercent, @PrePersist&#10;- ✅ `Review.java` - Añadidos: rating, comment, createdAt, @PrePersist&#10;&#10;### Repositorios Extendidos (3)&#10;- ✅ `CourseRepository.java`&#10;- ✅ `EnrollmentRepository.java`&#10;- ✅ `ReviewRepository.java`&#10;&#10;### Servicios Implementados (6)&#10;- ✅ `CategoryService.java` - CRUD completo&#10;- ✅ `CourseService.java` - CRUD + casos de uso&#10;- ✅ `UserService.java` - CRUD completo&#10;- ✅ `LessonService.java` - CRUD completo&#10;- ✅ `EnrollmentService.java` - Gestión completa de matrículas&#10;- ✅ `ReviewService.java` - Gestión completa de reviews&#10;&#10;### Documentación (2)&#10;- ✅ `SERVICIOS.md` - Documentación completa&#10;- ✅ `RESUMEN.md` - Este archivo&#10;&#10;---&#10;&#10;##  Ejemplo de Uso Completo&#10;&#10;```java&#10;// 1. Crear usuario instructor&#10;User instructor = userService.save(new User(null, &quot;Juan Pérez&quot;, &quot;juan@example.com&quot;, ...));&#10;&#10;// 2. Crear curso con lecciones&#10;Course course = new Course();&#10;course.setNombre(&quot;Spring Boot Master&quot;);&#10;course.setDuracionHoras(50);&#10;&#10;List&lt;Lesson&gt; lessons = Arrays.asList(&#10;    new Lesson(null, &quot;Intro&quot;, &quot;Contenido...&quot;, 30, null),&#10;    new Lesson(null, &quot;Spring Core&quot;, &quot;Contenido...&quot;, 45, null)&#10;);&#10;&#10;Course createdCourse = courseService.createCourseWithLessons(&#10;    course, instructor.getId(), lessons, Arrays.asList(1L, 2L)&#10;);&#10;&#10;// 3. Matricular estudiante&#10;User student = userService.save(new User(null, &quot;Ana López&quot;, &quot;ana@example.com&quot;, ...));&#10;Enrollment enrollment = enrollmentService.enrollUserInCourse(student.getId(), createdCourse.getId());&#10;&#10;// 4. Actualizar progreso&#10;enrollmentService.updateProgress(enrollment.getId(), 50); // 50%&#10;enrollmentService.updateProgress(enrollment.getId(), 100); // 100% → COMPLETED&#10;&#10;// 5. Publicar review&#10;Review review = reviewService.createReview(&#10;    student.getId(), &#10;    createdCourse.getId(), &#10;    5, &#10;    &quot;¡Excelente curso!&quot;&#10;);&#10;&#10;// 6. Listar cursos de una categoría&#10;List&lt;Course&gt; cursos = courseService.findCoursesByCategory(1L);&#10;```&#10;&#10;---&#10;&#10;## ✅ Estado del Proyecto&#10;&#10;| Componente | Estado | Observaciones |&#10;|------------|--------|---------------|&#10;| Entidades | ✅ Completo | 6 entidades con todas las asociaciones |&#10;| Repositorios | ✅ Completo | 6 repositorios + consultas personalizadas |&#10;| Servicios | ✅ Completo | 6 servicios con lógica de negocio |&#10;| Casos de Uso | ✅ Completo | 5 casos principales implementados |&#10;| Validaciones | ✅ Completo | Reglas de negocio aplicadas |&#10;| Documentación | ✅ Completo | SERVICIOS.md + RESUMEN.md |&#10;| Tests | ⏳ Pendiente | Próximo paso sugerido |&#10;| Controladores | ⏳ Pendiente | Próximo paso sugerido |&#10;&#10;---&#10;&#10;** ¡Implementación de servicios completada exitosamente!**&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Skillhub/SERVICIOS.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Skillhub/SERVICIOS.md" />
              <option name="updatedContent" value="# Documentación de Servicios - Skillhub&#10;&#10;## Resumen de Implementación&#10;&#10;Se han implementado **6 servicios** completos para gestionar todas las entidades del sistema:&#10;&#10;1. **CategoryService** - Gestión de categorías&#10;2. **CourseService** - Gestión de cursos&#10;3. **UserService** - Gestión de usuarios (alumnos e instructores)&#10;4. **LessonService** - Gestión de lecciones&#10;5. **EnrollmentService** - Gestión de matrículas&#10;6. **ReviewService** - Gestión de reseñas&#10;&#10;---&#10;&#10;## Casos de Uso Implementados&#10;&#10;### ✅ Caso de Uso 1: Crear curso con lecciones iniciales&#10;**Servicio:** `CourseService`  &#10;**Método:** `createCourseWithLessons(Course, Long instructorId, List&lt;Lesson&gt;, List&lt;Long&gt; categoryIds)`&#10;&#10;Permite crear un curso asignándole:&#10;- Un instructor (obligatorio)&#10;- Lecciones iniciales (opcional)&#10;- Categorías (opcional)&#10;&#10;```java&#10;// Ejemplo de uso&#10;Course course = new Course();&#10;course.setNombre(&quot;Java Spring Boot Avanzado&quot;);&#10;course.setDuracionHoras(40);&#10;&#10;List&lt;Lesson&gt; lessons = Arrays.asList(&#10;    new Lesson(null, &quot;Introducción a Spring&quot;, &quot;...&quot;, 45, null),&#10;    new Lesson(null, &quot;Configuración inicial&quot;, &quot;...&quot;, 30, null)&#10;);&#10;&#10;List&lt;Long&gt; categoryIds = Arrays.asList(1L, 2L);&#10;&#10;Course newCourse = courseService.createCourseWithLessons(course, instructorId, lessons, categoryIds);&#10;```&#10;&#10;---&#10;&#10;### ✅ Caso de Uso 2: Matricular usuario en curso&#10;**Servicio:** `EnrollmentService`  &#10;**Método:** `enrollUserInCourse(Long userId, Long courseId)`&#10;&#10;Matricula un usuario en un curso:&#10;- Verifica que no exista una matrícula previa&#10;- Establece valores por defecto: estado=ENROLLED, progreso=0%, fecha=now&#10;- Lanza excepción si el usuario ya está matriculado&#10;&#10;```java&#10;// Ejemplo de uso&#10;Enrollment enrollment = enrollmentService.enrollUserInCourse(userId, courseId);&#10;```&#10;&#10;---&#10;&#10;### ✅ Caso de Uso 3: Actualizar progreso de una matrícula&#10;**Servicio:** `EnrollmentService`  &#10;**Método:** `updateProgress(Long enrollmentId, Integer progressPercent)`&#10;&#10;Actualiza el porcentaje de progreso de una matrícula:&#10;- Valida que el progreso esté entre 0 y 100&#10;- Si el progreso llega al 100%, cambia automáticamente el estado a COMPLETED&#10;- Lanza excepción si el valor es inválido&#10;&#10;```java&#10;// Ejemplo de uso&#10;Enrollment updated = enrollmentService.updateProgress(enrollmentId, 75);&#10;&#10;// Si progreso = 100, automáticamente status = COMPLETED&#10;Enrollment completed = enrollmentService.updateProgress(enrollmentId, 100);&#10;```&#10;&#10;---&#10;&#10;### ✅ Caso de Uso 4: Listar cursos de una categoría&#10;**Servicio:** `CourseService`  &#10;**Método:** `findCoursesByCategory(Long categoryId)`&#10;&#10;Obtiene todos los cursos que pertenecen a una categoría específica usando una consulta JPQL optimizada.&#10;&#10;```java&#10;// Ejemplo de uso&#10;List&lt;Course&gt; cursos = courseService.findCoursesByCategory(categoryId);&#10;```&#10;&#10;---&#10;&#10;### ✅ Caso de Uso 5: Publicar una review y evitar duplicados&#10;**Servicio:** `ReviewService`  &#10;**Método:** `createReview(Long userId, Long courseId, Integer rating, String comment)`&#10;&#10;Permite publicar una reseña garantizando:&#10;- Un usuario solo puede escribir UNA review por curso&#10;- El rating debe estar entre 1 y 5&#10;- La fecha de creación se establece automáticamente&#10;- La unicidad está garantizada tanto en código como en BD (unique constraint)&#10;&#10;```java&#10;// Ejemplo de uso&#10;Review review = reviewService.createReview(userId, courseId, 5, &quot;Excelente curso!&quot;);&#10;&#10;// Si el usuario ya tiene una review para este curso, lanza excepción&#10;```&#10;&#10;---&#10;&#10;## Detalle de Servicios&#10;&#10;### 1. CategoryService&#10;**Operaciones CRUD completas:**&#10;- `findAll()` - Listar todas las categorías&#10;- `findById(Long id)` - Buscar categoría por ID&#10;- `save(Category)` - Crear nueva categoría&#10;- `update(Long id, Category)` - Actualizar categoría existente&#10;- `delete(Long id)` - Eliminar categoría&#10;&#10;---&#10;&#10;### 2. CourseService&#10;**Operaciones principales:**&#10;- `createCourseWithLessons(...)` - ✨ Crear curso con lecciones y categorías&#10;- `findCoursesByCategory(Long)` - ✨ Listar cursos por categoría&#10;- `findCoursesByInstructor(Long)` - Listar cursos de un instructor&#10;- `addCategoryToCourse(Long, Long)` - Añadir categoría a un curso&#10;- `findAll()`, `findById(Long)`, `update(Long, Course)`, `delete(Long)` - CRUD básico&#10;&#10;**Dependencias:** `CourseRepository`, `UserRepository`, `CategoryRepository`&#10;&#10;---&#10;&#10;### 3. UserService&#10;**Operaciones CRUD completas:**&#10;- `findAll()` - Listar todos los usuarios&#10;- `findById(Long id)` - Buscar usuario por ID&#10;- `save(User)` - Crear nuevo usuario&#10;- `update(Long id, User)` - Actualizar usuario&#10;- `delete(Long id)` - Eliminar usuario&#10;&#10;**Nota:** Los usuarios pueden ser tanto alumnos como instructores (sin distinción a nivel de entidad).&#10;&#10;---&#10;&#10;### 4. LessonService&#10;**Operaciones principales:**&#10;- `createLesson(Lesson, Long courseId)` - Crear lección y asociarla a un curso&#10;- `findAll()` - Listar todas las lecciones&#10;- `findById(Long id)` - Buscar lección por ID&#10;- `update(Long id, Lesson)` - Actualizar lección&#10;- `delete(Long id)` - Eliminar lección&#10;&#10;**Dependencias:** `LessonRepository`, `CourseRepository`&#10;&#10;---&#10;&#10;### 5. EnrollmentService&#10;**Operaciones principales:**&#10;- `enrollUserInCourse(Long, Long)` - ✨ Matricular usuario en curso&#10;- `updateProgress(Long, Integer)` - ✨ Actualizar progreso (0-100%)&#10;- `cancelEnrollment(Long)` - Cancelar matrícula (cambiar status a CANCELLED)&#10;- `findByUserAndCourse(Long, Long)` - Buscar matrícula específica&#10;- `findEnrollmentsByUser(Long)` - Listar matrículas de un usuario&#10;- `findEnrollmentsByCourse(Long)` - Listar estudiantes de un curso&#10;- `findAll()`, `findById(Long)` - Consultas generales&#10;&#10;**Lógica de negocio:**&#10;- No permite matrículas duplicadas&#10;- Progreso automático a COMPLETED cuando llega al 100%&#10;- Estados: ENROLLED, CANCELLED, COMPLETED&#10;&#10;**Dependencias:** `EnrollmentRepository`, `UserRepository`, `CourseRepository`&#10;&#10;---&#10;&#10;### 6. ReviewService&#10;**Operaciones principales:**&#10;- `createReview(Long userId, Long courseId, Integer rating, String comment)` - ✨ Crear review (evita duplicados)&#10;- `updateReview(Long reviewId, Integer rating, String comment)` - Actualizar review existente&#10;- `findByUserAndCourse(Long, Long)` - Buscar review específica&#10;- `findReviewsByCourse(Long)` - Listar todas las reviews de un curso&#10;- `findReviewsByUser(Long)` - Listar todas las reviews de un usuario&#10;- `findAll()`, `findById(Long)`, `delete(Long)` - Operaciones generales&#10;&#10;**Validaciones:**&#10;- Rating: 1-5 (obligatorio)&#10;- Un usuario solo puede tener una review por curso&#10;- Constraint único en BD: `@UniqueConstraint(columnNames = {&quot;user_id&quot;, &quot;course_id&quot;})`&#10;&#10;**Dependencias:** `ReviewRepository`, `UserRepository`, `CourseRepository`&#10;&#10;---&#10;&#10;## Asociaciones JPA y Direccionalidad&#10;&#10;### User ↔ Course (como instructor)&#10;- **Tipo:** `@ManyToOne` (Course → User)&#10;- **Direccionalidad:** Bidireccional&#10;- **Justificación:** Un instructor puede tener múltiples cursos, y es útil navegar desde el curso al instructor y viceversa.&#10;&#10;### Course ↔ Lesson&#10;- **Tipo:** `@OneToMany` (Course → Lesson) / `@ManyToOne` (Lesson → Course)&#10;- **Direccionalidad:** Bidireccional&#10;- **Cascade:** `CascadeType.ALL` en Course → cuando se elimina un curso, se eliminan sus lecciones&#10;- **Justificación:** Facilita navegar desde el curso a sus lecciones y desde la lección a su curso.&#10;&#10;### Course ↔ Category&#10;- **Tipo:** `@ManyToMany`&#10;- **Direccionalidad:** Bidireccional&#10;- **Tabla intermedia:** `course_category`&#10;- **Justificación:** Un curso puede pertenecer a múltiples categorías y una categoría puede tener múltiples cursos. La bidireccionalidad permite consultas eficientes en ambos sentidos.&#10;&#10;### User ↔ Course (matrículas) → Enrollment&#10;- **Tipo:** Dos `@ManyToOne` (Enrollment → User y Enrollment → Course)&#10;- **Direccionalidad:** Bidireccional con entidad intermedia&#10;- **Atributos extra:** `enrolledAt`, `status`, `progressPercent`&#10;- **Justificación:** La relación ManyToMany necesita atributos adicionales, por lo que se modela con una entidad intermedia.&#10;&#10;### User → Review ← Course&#10;- **Tipo:** `@ManyToOne` (Review → User) y `@ManyToOne` (Review → Course)&#10;- **Direccionalidad:** Bidireccional&#10;- **Constraint:** `@UniqueConstraint(columnNames = {&quot;user_id&quot;, &quot;course_id&quot;})`&#10;- **Justificación:** Permite consultar reviews desde el usuario o desde el curso, y garantiza que cada usuario solo pueda escribir una review por curso.&#10;&#10;---&#10;&#10;## Repositorios Extendidos&#10;&#10;Se añadieron métodos de consulta personalizados a los repositorios:&#10;&#10;### CourseRepository&#10;```java&#10;@Query(&quot;SELECT c FROM Course c JOIN c.categories cat WHERE cat.id = :categoryId&quot;)&#10;List&lt;Course&gt; findByCategoryId(Long categoryId);&#10;&#10;List&lt;Course&gt; findByInstructorId(Long instructorId);&#10;```&#10;&#10;### EnrollmentRepository&#10;```java&#10;Optional&lt;Enrollment&gt; findByUserIdAndCourseId(Long userId, Long courseId);&#10;List&lt;Enrollment&gt; findByUserId(Long userId);&#10;List&lt;Enrollment&gt; findByCourseId(Long courseId);&#10;boolean existsByUserIdAndCourseId(Long userId, Long courseId);&#10;```&#10;&#10;### ReviewRepository&#10;```java&#10;Optional&lt;Review&gt; findByUserIdAndCourseId(Long userId, Long courseId);&#10;List&lt;Review&gt; findByCourseId(Long courseId);&#10;List&lt;Review&gt; findByUserId(Long userId);&#10;boolean existsByUserIdAndCourseId(Long userId, Long courseId);&#10;```&#10;&#10;---&#10;&#10;## Características Implementadas&#10;&#10;✅ **Transacciones:** Todos los métodos de escritura están anotados con `@Transactional`  &#10;✅ **Validaciones:** Se validan los datos antes de persistir (ratings, progreso, duplicados)  &#10;✅ **Manejo de errores:** Excepciones descriptivas cuando no se encuentran entidades  &#10;✅ **Valores por defecto:** Uso de `@PrePersist` para establecer fechas y valores iniciales  &#10;✅ **Prevención de duplicados:** En Enrollment y Review  &#10;✅ **Lógica de negocio:** Auto-completar curso cuando progreso=100%  &#10;✅ **Consultas optimizadas:** JPQL para consultas complejas  &#10;✅ **Inyección de dependencias:** Uso de `@RequiredArgsConstructor` de Lombok  &#10;&#10;---&#10;&#10;## Próximos Pasos Sugeridos&#10;&#10;1. **Crear controladores REST** para exponer los servicios vía API&#10;2. **Añadir DTOs** para separar la capa de presentación del modelo de dominio&#10;3. **Implementar validaciones con Bean Validation** (@Valid, @NotNull, etc.)&#10;4. **Añadir paginación** en métodos que retornan listas&#10;5. **Implementar seguridad** con Spring Security&#10;6. **Añadir tests unitarios e integración** para cada servicio&#10;7. **Documentar la API** con OpenAPI/Swagger&#10;&#10;---&#10;&#10;## Tecnologías Utilizadas&#10;&#10;- **Spring Boot** - Framework principal&#10;- **Spring Data JPA** - Persistencia&#10;- **Hibernate** - Implementación de JPA&#10;- **Lombok** - Reducción de código boilerplate&#10;- **Jakarta Persistence API** - Anotaciones JPA&#10;&#10;---&#10;&#10;**Autor:** Sistema de Servicios Skillhub  &#10;**Fecha:** 2025-12-16  &#10;**Estado:** ✅ Completado - Todos los servicios implementados y documentados&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>